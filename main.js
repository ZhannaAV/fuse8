(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=void 0,(r="price")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this._template=".template",this._title=e.title,this._address=e.address,this._type=e.type,this._price=e.price,this._id=e.id,this._cardTypes={IndependentLiving:"card__label_type_independ",SupportAvailable:"card__label_type_support"}}var r,n;return r=t,(n=[{key:"_createCardTeml",value:function(){return document.querySelector(this._template).content.cloneNode(!0)}},{key:"_formatPrice",value:function(){return this._price=Number.prototype.toFixed.call(parseFloat(this._price)||0,2),this._price=this._price.replace(/(\D)/g,","),this._price=this._price.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 "),"£ "+this._price}},{key:"createCard",value:function(){return this._card=this._createCardTeml(),this._card.querySelector(".card__title").textContent=this._title,this._card.querySelector(".card__text_type_address").textContent=this._address,this._card.querySelector(".card__text-price").textContent=this._formatPrice(),this._card.querySelector(".card__img").src="https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",this._card.querySelector(".card__img").alt="arkhyz",this._card.querySelector(".card__label-caption").textContent=this._type,this._card.querySelector(".card__label").classList.add(this._cardTypes[this._type]),this._card.querySelector(".card__link").href="https://603e38c548171b0017b2ecf7.mockapi.io/homes/details/".concat(this._id),this._card}}])&&e(r.prototype,n),t}();function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t){var r=t.cards,n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardsContainerSelector=".cards",this._cards=r,this._renderer=n,this._container=document.querySelector(this._cardsContainerSelector)}var t,n;return t=e,(n=[{key:"addCard",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML='<template class="template"><li class="card"><a href="#" class="card__link"><div class="card__inner-img"><img class="card__img" src="#" alt=""><div class="card__label"><p class="card__label-caption"></p></div></div><article class="card__inner-text"><h2 class="card__title"></h2><p class="card__text card__text_type_address"></p><p class="card__text">New Properties for Sale from<span class="card__text-price">£214,999</span></p><p class=" card__text">Shared Ownership Available</p></article></a></li></template>'}},{key:"renderCards",value:function(){var e=this;this._cards.forEach((function(t){return e._renderer(t)}))}}])&&r(t.prototype,n),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url="https://603e38c548171b0017b2ecf7.mockapi.io/homes"}var t,r;return t=e,(r=[{key:"getCardsData",value:function(){return fetch(this._url).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&a(t.prototype,r),e}();function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){var r=t.handleFilterOn,n=t.handleFilterOff;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._input=document.querySelector(".filter__input"),this._handleFilterOn=r,this._handleFilterOff=n}var t,r;return t=e,(r=[{key:"_addListener",value:function(){var e=this;this._input.addEventListener("input",(function(t){return e._checkIssue(t)}))}},{key:"_checkIssue",value:function(e){this._inputText=e.target.value,this._inputText.length>3&&this._handleFilterOn(this._inputText.toLowerCase()),0===this._inputText.length&&this._handleFilterOff()}},{key:"switchOnFilter",value:function(){this._addListener()}}])&&c(t.prototype,r),e}(),l=[],o=new i;function d(e){return new t(e).createCard()}var u=new n({cards:l,renderer:function(e){return u.addCard(d(e))}});new s({handleFilterOn:function(e){o.getCardsData().then((function(t){u.clear(),t.forEach((function(t){t.title.toLowerCase().includes(e)&&u.addCard(d(t))}))})).catch((function(e){return console.log(e)}))},handleFilterOff:function(){o.getCardsData().then((function(e){u.clear(),l=[],e.forEach((function(e){return l.unshift(e)})),u.renderCards()})).catch((function(e){return console.log(e)}))}}).switchOnFilter(),o.getCardsData().then((function(e){e.forEach((function(e){return l.unshift(e)})),u.renderCards()})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=main.js.map