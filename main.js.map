{"version":3,"sources":["webpack://fuse8/./src/scripts/components/Card.js","webpack://fuse8/./src/scripts/components/SectionCards.js","webpack://fuse8/./src/scripts/components/Api.js","webpack://fuse8/./src/scripts/components/Filter.js","webpack://fuse8/./src/pages/index.js"],"names":["Card","cardData","this","_template","_title","title","_address","address","_type","type","_price","price","_id","id","_cardTypes","IndependentLiving","SupportAvailable","document","querySelector","content","cloneNode","Number","prototype","toFixed","call","parseFloat","replace","_card","_createCardTeml","textContent","_formatPrice","src","alt","classList","add","href","SectionCards","cards","renderer","_cardsContainerSelector","_cards","_renderer","_container","card","prepend","innerHTML","forEach","Api","_url","fetch","then","res","ok","json","Promise","reject","status","Filter","handleFilterOn","handleFilterOff","_input","_handleFilterOn","_handleFilterOff","addEventListener","evt","_checkIssue","_inputText","target","value","length","toLowerCase","_addListener","initialDataCards","api","newCard","createCard","cardsContainer","addCard","inputText","getCardsData","clear","includes","catch","err","console","log","unshift","renderCards","switchOnFilter"],"mappings":"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","file":"main.js","sourcesContent":["export default class Card {\n    price;\n\n    constructor(cardData) {\n        this._template = '.template';\n        this._title = cardData.title;\n        this._address = cardData.address;\n        this._type = cardData.type;\n        this._price = cardData.price;\n        this._id = cardData.id;\n        this._cardTypes = {\n            IndependentLiving: \"card__label_type_independ\",\n            SupportAvailable: \"card__label_type_support\"\n        }\n    }\n\n    _createCardTeml() {\n        return document.querySelector(this._template).content.cloneNode(true)\n    }\n\n    _formatPrice() {\n        this._price = Number.prototype.toFixed.call(parseFloat(this._price) || 0, 2)\n        this._price = this._price.replace(/(\\D)/g, \",\")\n        this._price = this._price.replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1 \");\n        return '£ ' + this._price;\n    }\n\n    createCard() {\n        this._card = this._createCardTeml();\n        this._card.querySelector('.card__title').textContent = this._title;\n        this._card.querySelector('.card__text_type_address').textContent = this._address;\n        this._card.querySelector('.card__text-price').textContent = this._formatPrice();\n        this._card.querySelector('.card__img').src = 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg';\n        this._card.querySelector('.card__img').alt = 'arkhyz';\n        this._card.querySelector('.card__label-caption').textContent = this._type\n        this._card.querySelector('.card__label').classList.add(this._cardTypes[this._type])\n        this._card.querySelector('.card__link').href = `https://603e38c548171b0017b2ecf7.mockapi.io/homes/details/${this._id}`\n        return this._card\n    }\n\n\n}","export default class SectionCards {\n    constructor({cards, renderer}) {\n        this._cardsContainerSelector = '.cards'\n        this._cards = cards;\n        this._renderer = renderer\n        this._container = document.querySelector(this._cardsContainerSelector)\n    }\n\n    addCard(card) {\n        this._container.prepend(card)\n    }\n\n    clear() {\n        this._container.innerHTML = `<template class=\"template\"><li class=\"card\"><a href=\"#\" class=\"card__link\"><div class=\"card__inner-img\"><img class=\"card__img\" src=\"#\" alt=\"\"><div class=\"card__label\"><p class=\"card__label-caption\"></p></div></div><article class=\"card__inner-text\"><h2 class=\"card__title\"></h2><p class=\"card__text card__text_type_address\"></p><p class=\"card__text\">New Properties for Sale from<span class=\"card__text-price\">£214,999</span></p><p class=\" card__text\">Shared Ownership Available</p></article></a></li></template>`\n    }\n\n    renderCards() {\n        this._cards.forEach(card => this._renderer(card))\n    }\n}","export default class Api {\n    constructor() {\n        this._url = 'https://603e38c548171b0017b2ecf7.mockapi.io/homes'\n    }\n\n    getCardsData() {\n        return fetch(this._url)\n            .then(res => {\n                if (res.ok) return res.json()\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n}","export default class Filter {\n    constructor({handleFilterOn, handleFilterOff}) {\n        this._input = document.querySelector('.filter__input')\n        this._handleFilterOn = handleFilterOn\n        this._handleFilterOff = handleFilterOff\n    }\n\n    _addListener() {\n        this._input.addEventListener('input', (evt) => this._checkIssue(evt))\n    }\n\n    _checkIssue(evt) {\n        this._inputText = evt.target.value\n        if (this._inputText.length > 3) this._handleFilterOn(this._inputText.toLowerCase())\n        if (this._inputText.length === 0) this._handleFilterOff()\n    }\n\n    switchOnFilter() {\n        this._addListener()\n    }\n\n\n}","import './index.css';\nimport Card from '../scripts/components/Card.js';\nimport SectionCards from '../scripts/components/SectionCards';\nimport Api from '../scripts/components/Api';\nimport Filter from \"../scripts/components/Filter\";\n\nlet initialDataCards = [];\n\nconst api = new Api\n\nfunction newCard(cardData) {\n    const card = new Card(cardData)\n    return card.createCard()\n}\n\nconst cardsContainer = new SectionCards({\n    cards: initialDataCards,\n    renderer: (cardData) => cardsContainer.addCard(newCard(cardData))\n})\n\nconst filter = new Filter(\n    {\n        handleFilterOn: (inputText) => {\n            api.getCardsData()\n                .then((res) => {\n                    cardsContainer.clear()\n                    res.forEach(cardData => {\n                        if (cardData.title.toLowerCase().includes(inputText)) cardsContainer.addCard(newCard(cardData))\n                    })\n                })\n                .catch((err) => console.log(err))\n        },\n\n        handleFilterOff: () => {\n            api.getCardsData()\n                .then(res => {\n                    cardsContainer.clear()\n                    initialDataCards = []\n                    res.forEach(cardData => initialDataCards.unshift(cardData))\n                    cardsContainer.renderCards()\n                })\n                .catch((err) => console.log(err))\n        }\n    })\n\nfilter.switchOnFilter()\n\napi.getCardsData()\n    .then(res => {\n        res.forEach(cardData => initialDataCards.unshift(cardData))\n        cardsContainer.renderCards()\n    })\n    .catch((err) => console.log(err))\n"],"sourceRoot":""}